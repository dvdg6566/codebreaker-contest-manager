{% extends "admin_base.html" %}
{% block title %} Edit Announcements {% endblock %} <!-- Title goes here -->
{% block head %} {{ super() }} {% endblock %}
{% with messages = get_flashed_messages() %}
{% if messages %}
<ul class=flashes>
	{% for message in messages %}
	<li>{{ message }}</li>
	{% endfor %}
</ul>
{% endif %}
{% endwith %}
{% block content %}
<br>
<div class="container">
	<div class="container">
		{% with messages = get_flashed_messages(with_categories=true) %}
		{% if messages %}
		{% for category, message in messages %}
		<div class="alert alert-{{category}} alert-dismissible fade show mt-4" role="alert">
			{{message}}
			<button type="button" class="close" data-dismiss="alert" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
		</div>
		{% endfor %}
		{% endif %}
		{% endwith %}
	</div>

	<h1> Edit Announcements </h1>
	<br>
	<!-- Post New Announcement -->
	<p>
		<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
			Post New Announcement
		</button>
	</p>
	<div class="collapse" id="collapseExample">
		<div class="card card-body">
			<form id="newannouncement" action="" method="POST" class="form-group" onSubmit="return confirm('Are you sure you want to post new announcement and notify all contestants?');">
				<div class="input-group mb-3">
					<!-- Input for title -->
					<div class="input-group-prepend">
						<span class="input-group-text">Title</span>
					</div>
					{{form.announcement_title(type='text', placeholder='Announcement Title', class='form-control')}}
				</div>
				<!-- Input for text -->
				<p>{{form.announcement_text(placeholder='Announcement Text', class='form-control')}}</p>

				{{form.submit(type='submit', id='submitbutton', class='btn btn-secondary')}}
			</form>
		</div>
	</div>

	{% for info in announcementsInfo %}
	<div class="card card-body">
		<h6> {{info.title}} 
			<span style="float:right;">
        {{info.announcementTime}}
    	</span>
		</h6>
		<hr>
		<p> {{info.text}} </p>
	</div>
	<!-- <div class="card text-left" style="margin-bottom: -1px; margin-right: 12px;">
		<div class="card-header bg-white" data-toggle="collapse" data-target="#{{info.announceId}}">
			{% if info.adminOnly %}
				<a href="/admin/editannouncement/{{info.announceId}}"><b>{{info.aTitle}}</b></a>
			{% else %}
				<a href="/admin/editannouncement/{{info.announceId}}">{{info.aTitle}}</a>
			{% endif %}
		</div>
		<div id="{{info.announceId}}" class="collapse" style="">
			<div class="card-body">
				<p class="card-text">{{info.aSummary}}</p>
				{% if info.contestLink != "" %}
				<a href="/contest/{{info.contestLink}}">Contest link</a>
				{% endif %}
			</div>
		</div>
	</div> -->
	<br>
	{% endfor %}
</div>
{% endblock %}
