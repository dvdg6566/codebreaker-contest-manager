{% extends "admin_base.html" %}
{% block title %} Users List {% endblock %} <!-- Title goes here -->
{% block head %} {{ super() }} {% endblock %}

{% block content %}

<br>

<div class="container">
	<h1> Edit Users </h1>

	<!-- <input type="submit"  -->

	<table class="table table-sm table-hover" id="myTable">
		<thead class="sortable thead-dark">
			<tr>
				<th scope="col">Check</th>
				<th scope="col">Username</th>
				<th scope="col">Full Name</th>
				<th scope="col">Role</th>
				<th scope="col">Email</th>
				<th scope="col">Contest</th>
				<th scope="col">Group</th>
				<th scope="col">Actions</th>
			</tr>
			</thead>
			
			<tbody>

			{% for user in allusersinfo%}
				<tr>
				<td><input type="checkbox" /></td>
				<td scope="row"><a href="/profile/{{user.username}}">{{user.username}}</a> </td>
				<td>{{user.fullname}}</td>
				<td> {{user.role}} </td>
				<td> {{user.email}} </td>
				<td>{{user.contest}}</td>
				<td> {{user.group}} </td>
				<td>
	        <button class="edit-btn">Edit</button>
	        <button class="save-btn">Save</button>
	      </td>
			{% endfor %}
		</tbody>
	</table>
</div>
	<!-- Makes table sortable -->
	<script src={{url_for('static',filename='js/sortable.js')}}> </script>
	<script>
    let lastChecked;

	  const checkboxes = document.querySelectorAll("input[type='checkbox']");
	  for (const checkbox of checkboxes) {
	    checkbox.addEventListener("click", function(e) {
	      if (e.shiftKey && lastChecked) {
	        let inBetween = false;
	        // Basically inBetween will be on if either of lastChecked or current chekcbox has been passed
	        for (const c of checkboxes) {
	          if (c === lastChecked || c === this) {
	            inBetween = !inBetween;
	          }

	          if (inBetween) {
	            c.checked = true;
	          }
	        }
	      }

	      lastChecked = this;
	    });
  }
	</script>
{% endblock %}
